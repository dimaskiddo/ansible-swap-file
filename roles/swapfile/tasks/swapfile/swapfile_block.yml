- name: Create Swap File
  command: fallocate -l {{ swap_file_size }} {{ swap_file_name }}
  when:
    - not swap_file_exists

- name: Set Swap File Permission
  file:
    path: "{{ swap_file_name }}"
    owner: root
    group: root
    mode: 0600
    state: file

- name: Format Swap File
  command: mkswap {{ swap_file_name }}
  when:
    - not swap_file_exists
